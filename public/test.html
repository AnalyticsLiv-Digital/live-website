<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        
        ga('create', 'UA-1603578-18', 'auto');
        ga('send', 'pageview');
        </script>
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-Z43N5HP5423"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   gtag('config', 'G-Z43N5HP5423');  
        </script>
</head>

<body>
    <a href="https://facebook.com">Link</a>
</body>


<script>
    
// current page host       
var baseURI = window.location.host;

// click event on body
jQuery("body").on("click", function(e) {
console.log("click detected");

// abandon if no active link or link within domain
var link = jQuery(e.target).closest("a");
if (link.length != 1 || baseURI == link[0].host) return;
// cancel event and record outbound link
e.preventDefault();

var href = link[0].href;
gtag('event','outbound', {
        'eventAction': 'link',
        'eventLabel': href   });
      ga('send', {
      'hitType': 'event',
      'eventCategory': 'outbound',
      'eventAction': 'link',
      'eventLabel': href,
      'hitCallback': loadPage
    });

    // redirect after one second if recording takes too long
    setTimeout(loadPage, 1000);

    // redirect to outbound page
    function loadPage() {
      document.location = href;
    }

        return false;
        });

</script>
</html>